<video id="video" src="./video" width="520"></video><br>
<button id="play">play</button>
<input id="seek" type="range" min="0"><span id="size"></span>
<button id="stop">stop</button>
<script>
  const play = document.getElementById("play");
  const stop = document.getElementById("stop");
  const seek = document.getElementById("seek");
  const size = document.getElementById("size");
  const video = document.getElementById("video");
  async function getSize() {
    const response = await fetch("./size");
    const { size } = await response.json();
    return size;
  }
  function at() {
    return seek.value;
  }
  async function load() {
    const response = await fetch("./video", {
      headers: {
        range: "bytes=" + at() + "-"
      }
    });
    const blob = await response.blob();
    video.src = window.URL.createObjectURL(blob);
  }
  play.addEventListener("click", () => {
    load();
  });
  seek.addEventListener("change", () => {
    size.innerHTML = at();
  });
  
  (async function() {
    const size = await getSize();
    seek.setAttribute("max", size);
  })();
  seek.value = 0;
</script>